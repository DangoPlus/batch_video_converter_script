# batch_video_converter_script

## AMD_Transcode_Script.bat

1.  **自动扫描** 指定文件夹内的所有视频文件。
2.  使用您的 **AMD 5700XT 显卡** 进行硬件加速转码，以实现速度和效率。
3.  创建一个**待办事项列表**，并记录已完成的文件，以便在脚本中断后可以**继续任务**。
4.  转码后的文件将以**均衡质量和大小的设置**保存。
5.  如果源文件是 `.mkv`，则输出 `.mkv`；否则，一律输出为 `.mp4`。
6.  成功转码后，**自动将原始文件移动**到指定的备份文件夹中，方便您后续检查和清理。

这是一个相当高效和智能的工作流程。为了实现这个功能，我们将使用强大的开源工具 **FFmpeg**，并结合 Windows 的批处理脚本（`.bat`）来自动化整个过程。
---

### 准备工作 (至关重要)

您需要先安装 FFmpeg，并确保您的系统可以调用它。

1.  **下载 FFmpeg**:
    *   请前往 [FFmpeg 官方构建页面](https://www.gyan.dev/ffmpeg/builds/)。
    *   下载 `ffmpeg-git-full.7z` 这个版本，因为它包含了所有功能和库。
2.  **解压 FFmpeg**:
    *   将下载的 `.7z` 文件解压到一个固定的位置，例如 `C:\ffmpeg`。
    *   解压后，您会看到一个 `bin` 文件夹，其中包含 `ffmpeg.exe`、`ffprobe.exe` 和 `ffplay.exe`。
3.  **配置环境变量**:
    *   这是为了让系统在任何路径下都能找到 `ffmpeg.exe`。
    *   右键点击“此电脑” -> “属性” -> “高级系统设置” -> “环境变量”。
    *   在“系统变量”区域找到并选中 `Path`，然后点击“编辑”。
    *   点击“新建”，然后将您刚才解压的 `bin` 文件夹的完整路径（例如 `C:\ffmpeg\bin`）粘贴进去。
    *   一路点击“确定”保存设置。
4.  **验证安装**:
    *   打开一个新的命令提示符（CMD）窗口，输入 `ffmpeg -version` 并按回车。如果您看到 FFmpeg 的版本信息，说明配置成功。

### 如何使用和定制脚本

1.  **配置路径**：
    *   用记事本或其他文本编辑器打开您保存的 `AMD_Transcode_Script.bat` 文件。
    *   在顶部的“**用户配置区域**”，将 `sourceFolder`、`outputFolder` 和 `originalsFolder` 的值修改为您电脑上的实际路径。
    *   **示例**：如果您想转换 `E:\Movies` 文件夹下的视频，并输出到 `E:\ConvertedMovies`，就相应修改。

2.  **运行脚本**：
    *   将您需要转换的视频文件（或包含视频文件的文件夹）放入您设置的 `sourceFolder` 中。
    *   双击运行 `AMD_Transcode_Script.bat` 文件。
    *   一个黑色的命令提示符窗口会弹出，并开始自动执行任务。

3.  **脚本工作流程详解**：
    *   **首次运行**：脚本会扫描所有视频，创建一个待办事项列表（您看不到这个临时文件），然后开始逐个转换。每转换成功一个，就会将原始文件移动走，并在脚本同目录下生成一个 `completed_list.log` 文件，记录下这个文件的路径。
    *   **中断与恢复**：如果您中途关闭了窗口，不用担心。下次重新双击运行脚本时，它会先读取 `completed_list.log`，扫描源文件夹时会自动跳过那些已经记录在日志中的文件，从而从上次中断的地方继续。
    *   **全部完成**：当所有文件都转换完毕后，脚本会提示“没有找到需要转换的新文件”，然后自动退出。

### 可选的定制化

*   **更改视频质量或编码器**:
    *   在脚本的 `FFmpeg 核心命令` 部分，您可以调整 `-quality` 参数。可选值通常有 `speed`（速度最快，质量稍低）、`balanced`（平衡）、`quality`（质量最高，速度稍慢）。
    *   如果您想使用 H.264 (兼容性更好，但压缩效率低于 H.265)，可以将 `-c:v hevc_amf` 修改为 `-c:v h264_amf`。

*   **重新编码音频**:
    *   目前脚本使用 `-c:a copy` 来直接复制音频，这非常高效。如果您因为某些原因（例如，想统一音频格式为 AAC）需要重新编码音频，可以将其修改为 `-c:a aac -b:a 192k`。

*   **添加更多视频格式**:
    *   在脚本的 `生成待办事项列表` 部分，您可以添加更多文件后缀名。例如，要添加对 `.vob` 文件的支持，只需将 `(*.mkv, *.mp4, *.mov, *.avi, *.flv, *.webm)` 修改为 `(*.mkv, *.mp4, *.mov, *.avi, *.flv, *.webm, *.vob)`。

**重要提示**: 在对大量重要文件进行操作前，强烈建议您先用一两个测试视频文件来运行脚本，确保一切都按预期工作（文件被正确转换、源文件被正确移动等）。
